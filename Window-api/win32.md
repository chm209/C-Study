# 윈도우 API

> WIN32, MFC는 대략적인 구조와 뭐가 있는지만 보고 넘어가겠음

> C++ 최신은 snakecase 인데 WIN32는 헝가리언에 pascalcase 라서 코드가 난잡함, 업데이트 까지 멈춰있음

> 2010년대 이후로 윈도우앱은 프론트는 C#, 백엔드는 C++로 개발하고 CRL로 DLL로 만들어서 참조하는 형태로 개발함, WIN32를 잘 사용하지도 않고 간혹 직접 호출해서 쓰는경우가 있다는데 흔하지 않을뿐더러 그때는 구글을 참고해서 하는게 편함

### 윈도우 프로그램의 구조

크게 메인부분, 메시지 처리 부분으로 나뉜다.

메인부분: 윈도우를 만들고, 화면에 윈도우를 띄우며, 윈도우나 응용 프로그램과 관련해 발생하는 모든 메시지를 전송하는 역할을 한다. 엄밀히 말하면 메시진느 이벤트가 발생하면 오는 신호인데, 이때 신호는 윈도우 커널이 보낸다. 메인 부분은 이 신호를 하나씩 받아서 메시지 처리 부분으로 보낸다.

메시지 처리 부분: 메시지를 받고 메시지에 약속된 반응을 나타낸다. 메시지에는 마우스의 움직임이나 버튼 클릭에 따른 메시지, 키보드 눌림에 따른 메시지, 다양한 컨트롤에서 발생하는 메시지, 메누에서 발생하는 메시지가 있다. <- WPF에서 그냥 이벤트 메서드랑 비슷한거 같음

메인 함수: WinMain()
윈도우 클래스: _WNDXLASSEX 구조체
윈도우 생성: CreateWindow() 함수
메시지 처리 함수: WndProc()

!!  출력을 위해 얻어온 화면 영역을 디바이스 콘텍스트 (DC) 라고 한다. 변수 타입은 HDC
HDC 타입은 메모리 영역을 관리하며 메모리 영역에는 얻어온 화면 영역에 대한 속성 값을 저장할 수 있다.

문자 집한은 MBCS와 유니코드가 있는데 유니코드를 사용하도록 하자.

메모장이나 일반 워드에서는 글자를 입력할 위치에 깜빡이는 커서가 나타나는데 이것을 캐럿이라고 한다.

윈도우에 도형을 그려서 이동할때 윈도우 자체를 지우고 윈도우를 새로 만들어 원을 그려줬는데 귀찮기도 하고 화면이 깜빡이는 단점이 있다. 이를 위한 방법이 래스터 연산이다.

색깔 반전을 통해 윈도우를 지우지않고 이동할 수 있다고 한다.

이외에 책 내용은 전부 기능 설명이다. 생략한다.

### 소켓 프로그래밍

윈도우 소켓은 윈속 (Winsock) 이라고 한다. 이를 사용하기 위해서 프로젝트 환경에 ws2_32.lib을 추가한다.

아래는 관련 정보인데 자세한 사용 방법은 구글링을 하도록 하자.

외울 필요가 없는 부분도 있고 꼭 알아야 하는 부분도 있다고 한다.

OSI 7 단계 같은 네트워크 상식들은 다른 책으로 공부하도록 하겠다.